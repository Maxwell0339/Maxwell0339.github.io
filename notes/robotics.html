
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.29.1" theme-name="Stellar" theme-version="1.29.1">
  
  <meta name="generator" content="Hexo 7.3.0">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  
  <title>notes：Robotics(EN) - Maxwell's Blog</title>

  
    <meta name="description" content="Chap1. Spatial Descriptions and TransformationsSec 1.1 Descriptions: Positions, Orientations and Frames Descriptions of a position  \mathbf{^A P} &#x3D; \begin{bmatrix} P_x \\ P_y \\ P_z \end{bmatrix}Posit">
<meta property="og:type" content="website">
<meta property="og:title" content="Robotics(EN)">
<meta property="og:url" content="https://maxwell0339.github.io/notes/robotics.html">
<meta property="og:site_name" content="Maxwell&#39;s Blog">
<meta property="og:description" content="Chap1. Spatial Descriptions and TransformationsSec 1.1 Descriptions: Positions, Orientations and Frames Descriptions of a position  \mathbf{^A P} &#x3D; \begin{bmatrix} P_x \\ P_y \\ P_z \end{bmatrix}Posit">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img.dexbug.com/i/2025/03/25/rcbtv2.png">
<meta property="og:image" content="https://img.dexbug.com/i/2025/03/25/re1z8g.png">
<meta property="article:published_time" content="2025-06-13T12:35:47.429Z">
<meta property="article:modified_time" content="2025-06-13T12:35:47.429Z">
<meta property="article:author" content="Maxwell">
<meta property="article:tag" content="Robotics, Embedding system">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.dexbug.com/i/2025/03/25/rcbtv2.png">
  
  
  
  <meta name="keywords" content="Robotics, Embedding system">

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.29.1">

  
    <link rel="shortcut icon" href="https://img.dexbug.com/i/2025/03/25/pksh2k.png">
  

  

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>



<div class="l_body s:aa content tech" id="start" layout="page" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://img.dexbug.com/i/2025/03/24/112d8hl.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">Maxwell's Blog</div><div class="sub normal cap">Never Stop Learning</div><div class="sub hover cap" style="opacity:0"> Designed by Maxwell</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="在 notes 中搜索"></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div>


<nav class="menu dis-select"><a class="nav-item" title="博客" href="/" style="color:#1BCDFC"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M5.879 2.879C5 3.757 5 5.172 5 8v8c0 2.828 0 4.243.879 5.121C6.757 22 8.172 22 11 22h2c2.828 0 4.243 0 5.121-.879C19 20.243 19 18.828 19 16V8c0-2.828 0-4.243-.879-5.121C17.243 2 15.828 2 13 2h-2c-2.828 0-4.243 0-5.121.879M8.25 17a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75M9 12.25a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5zM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 0 1.5H9A.75.75 0 0 1 8.25 9" clip-rule="evenodd"/><path fill="currentColor" d="M5.235 4.058C5 4.941 5 6.177 5 8v8c0 1.823 0 3.058.235 3.942L5 19.924c-.975-.096-1.631-.313-2.121-.803C2 18.243 2 16.828 2 14v-4c0-2.829 0-4.243.879-5.121c.49-.49 1.146-.707 2.121-.803zm13.53 15.884C19 19.058 19 17.822 19 16V8c0-1.823 0-3.059-.235-3.942l.235.018c.975.096 1.631.313 2.121.803C22 5.757 22 7.17 22 9.999v4c0 2.83 0 4.243-.879 5.122c-.49.49-1.146.707-2.121.803z" opacity=".5"/></svg></a><a class="nav-item" title="文档" href="/wiki/" style="color:#3DC550"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M14.25 4.48v3.057c0 .111 0 .27.02.406a.936.936 0 0 0 .445.683a.96.96 0 0 0 .783.072c.13-.04.272-.108.378-.159L17 8.005l1.124.534c.106.05.248.119.378.16a.958.958 0 0 0 .783-.073a.936.936 0 0 0 .444-.683c.021-.136.021-.295.021-.406V3.031c.113-.005.224-.01.332-.013C21.154 2.98 22 3.86 22 4.933v11.21c0 1.112-.906 2.01-2.015 2.08c-.97.06-2.108.179-2.985.41c-1.082.286-1.99 1.068-3.373 1.436c-.626.167-1.324.257-1.627.323V5.174c.32-.079 1.382-.203 1.674-.371c.184-.107.377-.216.576-.323m5.478 8.338a.75.75 0 0 1-.546.91l-4 1a.75.75 0 0 1-.364-1.456l4-1a.75.75 0 0 1 .91.546" clip-rule="evenodd"/><path fill="currentColor" d="M18.25 3.151c-.62.073-1.23.18-1.75.336a8.2 8.2 0 0 0-.75.27v3.182l.75-.356l.008-.005a1.13 1.13 0 0 1 .492-.13c.047 0 .094.004.138.01c.175.029.315.1.354.12l.009.005l.749.356V3.647z"/><path fill="currentColor" d="M12 5.214c-.334-.064-1.057-.161-1.718-.339C8.938 4.515 8.05 3.765 7 3.487c-.887-.234-2.041-.352-3.018-.412C2.886 3.007 2 3.9 2 4.998v11.146c0 1.11.906 2.01 2.015 2.079c.97.06 2.108.179 2.985.41c.486.129 1.216.431 1.873.726c1.005.451 2.052.797 3.127 1.034z" opacity=".5"/><path fill="currentColor" d="M4.273 12.818a.75.75 0 0 1 .91-.545l4 1a.75.75 0 1 1-.365 1.455l-4-1a.75.75 0 0 1-.545-.91m.909-4.545a.75.75 0 1 0-.364 1.455l4 1a.75.75 0 0 0 .364-1.455z"/></svg></a><a class="nav-item active" title="笔记" href="/notes/" style="color:#FA6400"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0" opacity=".5"/><path fill="currentColor" d="M17.712 5.453c1.047-.193 2.006-.259 2.797-.152c.77.103 1.536.393 1.956 1.064c.446.714.312 1.542-.012 2.258c-.33.728-.918 1.499-1.672 2.268c-1.516 1.547-3.836 3.226-6.597 4.697c-2.763 1.472-5.495 2.484-7.694 2.92c-1.095.217-2.098.299-2.923.201c-.8-.095-1.6-.383-2.032-1.075c-.47-.752-.296-1.63.07-2.379c.375-.768 1.032-1.586 1.872-2.403L4 12.416c0 .219.083.71.168 1.146c.045.23.09.444.123.596c-.652.666-1.098 1.263-1.339 1.756c-.277.567-.208.825-.145.925c.072.116.305.305.937.38c.609.073 1.44.018 2.455-.183c2.02-.4 4.613-1.351 7.28-2.772c2.667-1.42 4.85-3.015 6.23-4.423c.694-.707 1.15-1.334 1.377-1.836c.233-.515.167-.75.107-.844c-.07-.112-.289-.294-.883-.374c-.542-.072-1.272-.041-2.163.112L16.87 5.656c.338-.101.658-.17.842-.203"/></svg></a></nav>
</div>
<div class="widgets">

<widget class="widget-wrapper post-list"><div class="widget-body fs14"><a class="link" href="/notes/index.html#start"><span class="toc-text">Forehead</span></a><a class="link active" href="/notes/robotics.html"><span class="toc-text">Robotics(EN)</span><svg class="active-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M21 11.098v4.993c0 3.096 0 4.645-.734 5.321c-.35.323-.792.526-1.263.58c-.987.113-2.14-.907-4.445-2.946c-1.02-.901-1.529-1.352-2.118-1.47a2.225 2.225 0 0 0-.88 0c-.59.118-1.099.569-2.118 1.47c-2.305 2.039-3.458 3.059-4.445 2.945a2.238 2.238 0 0 1-1.263-.579C3 20.736 3 19.188 3 16.091v-4.994C3 6.81 3 4.666 4.318 3.333C5.636 2 7.758 2 12 2c4.243 0 6.364 0 7.682 1.332C21 4.665 21 6.81 21 11.098" opacity=".5"/><path fill="currentColor" d="M9 5.25a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5z"/></svg></a><a class="link" href="/notes/autocontrol.html"><span class="toc-text">ME Control(EN)</span></a><a class="link" href="/notes/sensors.html"><span class="toc-text">Sensors and Measurement System(EN)</span></a><a class="link" href="/notes/dc.html"><span class="toc-text">Digital Circuit(EN)</span></a><a class="link" href="/notes/kalman.html"><span class="toc-text">Fundamentals of Kalman Filter and Inertia Navigation(EN)</span></a><a class="link" href="/notes/fm.html"><span class="toc-text">Fluid Mechanics(EN)</span></a><a class="link" href="/notes/kf_rv_q.html"><span class="toc-text">KF and INS Review Questions(EN)</span></a><a class="link" href="/notes/sensors_rv_q.html"><span class="toc-text">Sensors and Measurement System Revision Questions</span></a></div></widget>



<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">最近更新</span></div><div class="widget-body fs14"><a class="item title" href="/2025/04/07/20250407/"><span class="title">如何从0搭建你的Python环境</span></a><a class="item title" href="/2025/03/25/20250325/"><span class="title">如何使用LaTex写文章？</span></a><a class="item title" href="/2025/03/23/20250324/"><span class="title">为什么我想建立自己的博客网站</span></a></div></widget>
</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" title="GitHub" href="https://github.com/Maxwell0339" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-github fa-brands fa-bounce"></i></a></div></footer>
</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top"></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>Robotics(EN)</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><h2 id="Chap1-Spatial-Descriptions-and-Transformations"><a href="#Chap1-Spatial-Descriptions-and-Transformations" class="headerlink" title="Chap1. Spatial Descriptions and Transformations"></a>Chap1. Spatial Descriptions and Transformations</h2><h3 id="Sec-1-1-Descriptions-Positions-Orientations-and-Frames"><a href="#Sec-1-1-Descriptions-Positions-Orientations-and-Frames" class="headerlink" title="Sec 1.1 Descriptions: Positions, Orientations and Frames"></a>Sec 1.1 Descriptions: Positions, Orientations and Frames</h3><ol>
<li><p><strong>Descriptions of a position</strong></p>
<script type="math/tex; mode=display">
\mathbf{^A P} = \begin{bmatrix} P_x \\ P_y \\ P_z \end{bmatrix}</script><p>Position is represented in a column vector $(n \times 1)$</p>
</li>
<li><p><strong>Description of an orientation</strong></p>
<p>Rotation matrix</p>
<script type="math/tex; mode=display">
{}^A_BR = \left[ {}^A\widehat{X}_B \quad {}^A\widehat{Y}_B \quad {}^A\widehat{Z}_B \right]</script><blockquote>
<p><strong>Properties</strong>  </p>
<ul>
<li>Transpose of rotation matrix describing $  \{A\} $ relative to $\{ B\} $ equals to the matrix describing $  \{ B  \} $ relative to $ \{  A \} $  :</li>
<li><script type="math/tex; mode=display">
{}^A_BR = {}^B_AR^T</script></li>
<li>Rotation matrix describing a rectangular coordinate system $\{A  \} $ relative to another is orthogonal:  </li>
<li><script type="math/tex; mode=display">
{}^B_AR^{-1} = {}^B_AR^T</script></li>
</ul>
</blockquote>
</li>
<li><p><strong>Description of a frame</strong></p>
</li>
</ol>
<p>A frame (coordinate system) can be described by a vector and a rotation matrix:</p>
<script type="math/tex; mode=display">
\{B\} = \{^A_BR, ^A\mathbf{P}_{BORG}\}</script><blockquote>
<p><strong>Attention</strong>  </p>
<ul>
<li>${}^A_BR(x, \alpha)$: $\{B\}$ rotated counterclockwise about $\{A\}$’s x-axis by $\alpha$ degrees  </li>
<li>${}^A_BR(y, \beta)$: $\{B\}$ rotated counterclockwise about $\{A\}$’s y-axis by $\beta$ degrees  </li>
<li>${}^A_BR(z, \gamma)$: $\{B\}$ rotated counterclockwise about $\{A\}$’s z-axis by $\gamma$ degrees  </li>
</ul>
<p><strong>Rotation Matrices</strong>:  </p>
<script type="math/tex; mode=display">
{}^A_BR(x, \alpha) = \begin{bmatrix} 1 & 0 & 0 \\ 0 & \cos\alpha & -\sin\alpha \\ 0 & \sin\alpha & \cos\alpha \end{bmatrix}</script><script type="math/tex; mode=display">
{}^A_BR(y, \beta) = \begin{bmatrix} \cos\beta & 0 & \sin\beta \\ 0 & 1 & 0 \\ -\sin\beta & 0 & \cos\beta \end{bmatrix}</script><script type="math/tex; mode=display">
{}^A_BR(z, \gamma) = \begin{bmatrix} \cos\gamma & -\sin\gamma & 0 \\ \sin\gamma & \cos\gamma & 0 \\ 0 & 0 & 1 \end{bmatrix}</script></blockquote>
<h3 id="Sec-1-2-Mappings"><a href="#Sec-1-2-Mappings" class="headerlink" title="Sec 1.2 Mappings"></a>Sec 1.2 Mappings</h3><p>Mapping changes the description of a point from one frame to another.</p>
<ol>
<li><p><strong>Mappings involving translated frames</strong><br> If $\{A\}$ and $\{B\}$ have the same orientation but differ by translation ${}^AP_{BORG}$:  </p>
<script type="math/tex; mode=display">
^AP = ^BP + ^AP_{BORG}</script></li>
</ol>
<ol>
<li><p><strong>Mappings involving rotated frames</strong><br> If $\{A\}$ and $\{B\}$ share the same origin but differ by rotation ${}^A_BR$:  </p>
<script type="math/tex; mode=display">
{}^AP = {}^A_BR \, {}^BP</script></li>
<li><p><strong>Mapings involving general frames</strong><br> For frames differing by both translation and rotation:  </p>
<script type="math/tex; mode=display">
{}^AP = {}^A_BR \, {}^BP + {}^AP_{BORG}</script></li>
</ol>
<p><strong>Homogeneous Transform Matrix</strong>:</p>
<script type="math/tex; mode=display">
{}^A_BT = \begin{bmatrix} {}^A_BR & {}^A\mathbf{P}_{BORG} \\ \mathbf{0} & 1 \end{bmatrix}</script><script type="math/tex; mode=display">
\begin{bmatrix} {}^AP \\ 1 \end{bmatrix} = {}^A_BT \begin{bmatrix} {}^BP \\ 1 \end{bmatrix}</script><blockquote>
<p><strong>Attention</strong><br>Mapping describes the <strong>same point</strong> in different frames. Translation and rotation relate frames, not point positions.</p>
</blockquote>
<hr>
<h3 id="Sec-1-3-Operators"><a href="#Sec-1-3-Operators" class="headerlink" title="Sec 1.3 Operators"></a>Sec 1.3 Operators</h3><p>Operators translate points, rotate vectors, or both.</p>
<ol>
<li><p><strong>Translational operators</strong></p>
<p>Translating point $P_1$ by ${}^A\mathbf{Q}$:</p>
<script type="math/tex; mode=display">
{}^AP_2 = {}^AP_1 + {}^A\mathbf{Q}</script><p>Matrix form:</p>
<script type="math/tex; mode=display">
D_Q = \begin{bmatrix} 1 & 0 & 0 & q_x \\ 0 & 1 & 0 & q_y \\ 0 & 0 & 1 & q_z \\ 0 & 0 & 0 & 1 \end{bmatrix}</script><script type="math/tex; mode=display">
\begin{bmatrix} {}^AP_2 \\ 1 \end{bmatrix} = D_Q \begin{bmatrix} {}^AP_1 \\ 1 \end{bmatrix}</script></li>
<li><p><strong>Rotational operators</strong></p>
<p>Rotating vector ${}^AP_1$ by $R$:</p>
<script type="math/tex; mode=display">
{}^AP_2 = R \, {}^AP_1</script><p>$R$ is equivalent to a rotation matrix ${}^A_BR$.</p>
</li>
<li><p><strong>Transformation operators</strong></p>
<p>Combining translation and rotation:</p>
<script type="math/tex; mode=display">
\begin{bmatrix} {}^AP_2 \\ 1 \end{bmatrix} = T \begin{bmatrix} {}^AP_1 \\ 1 \end{bmatrix}</script><p>where $T = \begin{bmatrix} R &amp; \mathbf{Q} \\ 0 &amp; 1 \end{bmatrix}$.</p>
</li>
</ol>
<blockquote>
<p><strong>Attention</strong><br>Operators act on vectors <strong>before</strong> transformation, while mappings describe vectors <strong>after</strong> transformation.</p>
</blockquote>
<hr>
<h3 id="Sec-1-4-Transformation-Arithmetic"><a href="#Sec-1-4-Transformation-Arithmetic" class="headerlink" title="Sec 1.4 Transformation Arithmetic"></a>Sec 1.4 Transformation Arithmetic</h3><ol>
<li><p><strong>Compound Transformation</strong></p>
<ul>
<li><p><strong>Problem</strong>: Transform ${}^CP$ to ${}^AP$ via intermediate frames:</p>
<script type="math/tex; mode=display">
{}^A_CT = {}^A_BT {}^B_CT</script><script type="math/tex; mode=display">
\begin{bmatrix} {}^AP \\ 1 \end{bmatrix} = {}^A_CT \begin{bmatrix} {}^CP \\ 1 \end{bmatrix}</script><p><strong>Fixed reference frame transformations</strong>:  </p>
<script type="math/tex; mode=display">
{}^3_1T = {}^3_2T {}^2_1T</script></li>
</ul>
</li>
<li><p><strong>Inverse transformation</strong></p>
<ul>
<li><p><strong>Method 1</strong>: ${}^B_AT = {}^A_BT^{-1}$</p>
</li>
<li><p><strong>Method 2</strong>:</p>
<script type="math/tex; mode=display">
{}^B_AT = \begin{bmatrix} {}^A_BR^T & -{}^A_BR^T \, {}^AP_{BORG} \\ \mathbf{0} & 1 \end{bmatrix}</script></li>
</ul>
</li>
</ol>
<h3 id="Sec-1-5-More-on-Representation-of-Orientation"><a href="#Sec-1-5-More-on-Representation-of-Orientation" class="headerlink" title="Sec 1.5 More on Representation of Orientation"></a>Sec 1.5 More on Representation of Orientation</h3><ol>
<li><p><strong>X-Y-Z Fixed Angles</strong><br> Rotate $\{B\}$ about fixed axes of $\{A\}$ (order: X→Y→Z):  </p>
<script type="math/tex; mode=display">
{}^A_BR = R(z, \alpha) R(y, \beta) R(x, \gamma)</script></li>
<li><p><strong>Z-Y-X Euler Angles</strong><br> Rotate $\{B\}$ about its own axes (order: Z→Y→X):  </p>
<p><img class="lazy" title="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://img.dexbug.com/i/2025/03/25/rcbtv2.png" alt=""></p>
<script type="math/tex; mode=display">
{}^A_BR = R(z, \alpha) R(y, \beta) R(x, \gamma)</script></li>
<li><p><strong>Z-Y-Z Euler Angles</strong><br> Rotate $\{B\}$ about its own axes (order: Z→Y→Z): </p>
<script type="math/tex; mode=display">
{}^A_BR = R(z, \alpha) R(y, \beta) R(z, \gamma)</script></li>
<li><p><strong>Comparison</strong></p>
<p><img class="lazy" title="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://img.dexbug.com/i/2025/03/25/re1z8g.png" alt=""></p>
</li>
</ol>
<h2 id="Chap-2-Manipulator-Kinematics"><a href="#Chap-2-Manipulator-Kinematics" class="headerlink" title="Chap 2. Manipulator Kinematics"></a>Chap 2. Manipulator Kinematics</h2><h3 id="Sec-2-1-Link-Description"><a href="#Sec-2-1-Link-Description" class="headerlink" title="Sec 2.1 Link Description"></a>Sec 2.1 Link Description</h3><p><strong>Definition</strong>:</p>
<blockquote>
<p>A manipulator may be thought of a set of bodies connected in a chain by joints. These bodies are called links. Joints form a connection between a neighboring pair of links</p>
</blockquote>
<ul>
<li>A manipulator normally has revolute joints（转动关节） or prismatic joints（移动关节）.</li>
<li>In most cases, a joint of a manipulator has only one degree-of-freedom (DoFs).</li>
<li>A joint with $n$DoFs can be modeled as$n$joints with 1 DoF connected with$n - 1$ links with zero lengths.</li>
</ul>
<p><strong>A 2D example</strong>:</p>
<p><img src = "https://img.dexbug.com/i/2025/06/09/zmhhqb.png" width =30%></p>
<p><strong>General 3D cases</strong>:</p>
<p><img src = "https://img.dexbug.com/i/2025/06/09/10j6pa0.png" width =50%></p>
<p><strong>Objective</strong></p>
<p>Describe relative location of two joint axes in 3D space.</p>
<p><strong>Assumption</strong></p>
<ul>
<li>A link is considered only as a rigid body that defines the relationship between two neighboring joint axes of a manipulator.</li>
<li>Joint axis $i$is defined by a line in space about which link$i$rotates relative to link $i - 1$.</li>
</ul>
<p><strong>Conclusions</strong></p>
<ul>
<li><strong>link length ($a_{i - 1}$)</strong> is measured along the common perpendicular line.</li>
<li><strong>link twist ($\alpha_{i - 1}$)</strong> is defined as the angle between projections of axis $i - 1$ and axis $i$ onto a plane whose normal is the common perpendicular line, and measured from axis $i - 1$ to axis $i$ in the right - hand sense about $a_{i - 1}$.</li>
<li><strong>Link offset ($d_i$)</strong> is the <em>signed</em> distance along the common axis from one link to next.</li>
<li><strong>Joint angle ($\theta_i$)</strong> describes the amount of rotation about the common axis between one link and its neighbor.<ul>
<li>If joint $i$ is a prismatic joint, $d_i$ is variable.</li>
<li>If joint $i$ is a revolute joint, $\theta_i$ is variable.</li>
</ul>
</li>
</ul>
<blockquote>
<p>A robotic manipulator can be described kinematically by four quantities $a_i$, $\alpha_i$, $d_i$, $\theta_i$for each link.</p>
<p>In the case of a prismatic joint,$d_i$is the joint variable, and the other three quantities are fixed link parameters.</p>
<p>In the case of a revolute joint,$\theta_i$ is the joint variable, and the other three quantities are fixed link parameters.</p>
</blockquote>
<p>The definition of mechanisms by means of these quantities is a convention usually called the <strong>Denavit-Hartenberg notation</strong>.</p>
<h3 id="Sec-2-2-Manipulator-Kinematics"><a href="#Sec-2-2-Manipulator-Kinematics" class="headerlink" title="Sec 2.2 Manipulator Kinematics"></a>Sec 2.2 Manipulator Kinematics</h3><h4 id="Sec-2-2-1-Convention-for-Affixing-Frames-to-Links"><a href="#Sec-2-2-1-Convention-for-Affixing-Frames-to-Links" class="headerlink" title="Sec 2.2.1 Convention for Affixing Frames to Links"></a>Sec 2.2.1 Convention for Affixing Frames to Links</h4><p><img src = "https://img.dexbug.com/i/2025/06/09/10yr6yr.png"></p>
<p>The frame attached to link $i$ is named $\{i\}$.</p>
<p>Location of frames on <strong>intermediate links</strong> (link 1 to link n-1):</p>
<ul>
<li>The origin of $\{i\}$is located at the intersection of link$i$and joint axis $i$;</li>
<li>$\hat{\boldsymbol{Z}}_i$is coincident with joint axis $i$;</li>
<li>$\hat{\boldsymbol{X}}_i$points along$a_i$in the direction from joint$i$to joint $i+1$;</li>
<li>$\hat{\boldsymbol{Y}}_i$ is formed by the right-hand rule.</li>
</ul>
<p><strong>Procedures of assigning link-attached frames:</strong></p>
<p>(1) Identify the joint axes and mark the extension of these axes;</p>
<p>(2) Identify the common perpendicular between joint axis $i$ and joint axis $i + 1$, or identify the intersection of them; At the intersection, or at the point where the common perpendicular meets the $i$-th axis, assign the link-frame origin;</p>
<p>(3) Assign the $\hat{\boldsymbol{Z}}_i$axis pointing along the$i$th joint axis;</p>
<p>(4) Assign the $\hat{\boldsymbol{X}}_i$axis pointing along the common perpendicular, or, if joint axis$i$and joint axis$i + 1$intersect, assign$\hat{\boldsymbol{X}}_i$to be normal to the plane containing the two axes;</p>
<p>(5) Assign the$\hat{\boldsymbol{Y}}_i$ axis to complete a right-hand coordinate system;</p>
<p>(6) Assign $\{0\}$to match$\{1\}$when the first joint variable is zero. For$\{N\}$, choose an origin location and $\boldsymbol{\hat{X}_N}$ direction freely, but generally so as to cause as many linkage parameters as possible to become zero.</p>
<p><strong>Implications of link parameters in terms of attached frames:</strong></p>
<ul>
<li>$a_i$: the distance from $\hat{\boldsymbol{Z}}_i$to$\hat{\boldsymbol{Z}}_{i + 1}$measured along$\hat{\boldsymbol{X}}_i$;</li>
<li>$\alpha_i$: the angle from $\hat{\boldsymbol{Z}}_i$to$\hat{\boldsymbol{Z}}_{i + 1}$measured about$\hat{\boldsymbol{X}}_i$;</li>
<li>$d_i$: the distance from $\hat{\boldsymbol{X}}_{i - 1}$to$\hat{\boldsymbol{X}}_i$measured along$\hat{\boldsymbol{Z}}_i$;</li>
<li>$\theta_i$: the angle from $\hat{\boldsymbol{X}}_{i - 1}$to$\hat{\boldsymbol{X}}_i$measured about$\hat{\boldsymbol{Z}}_i$.</li>
</ul>
<p>The assignment of frames to links is not unique. There are many choices.</p>
<ul>
<li>The choice of direction of $\boldsymbol{Z}_i$;</li>
<li>In the case of intersecting joint axes, there are two choices for the direction of $\boldsymbol{X}_i$;</li>
<li>When axes $i+1$are parallel, the choice of origin location of$\{i\}$ is arbitrary.</li>
</ul>
<h4 id="Sec-2-2-2-Manipulator-Kinematics"><a href="#Sec-2-2-2-Manipulator-Kinematics" class="headerlink" title="Sec 2.2.2 Manipulator Kinematics"></a>Sec 2.2.2 Manipulator Kinematics</h4><p><strong>Objective:</strong></p>
<p>Find the descriptions of position and/or orientation of the end-effector in terms of the reference frame (or the frame attached on base), given joint variables and parameters.</p>
<p><strong>Basic idea:</strong>‘=</p>
<ul>
<li>Construct the transform that defines frame <code>&#123;i&#125;</code> relative to frame <code>&#123;i - 1&#125;</code>;</li>
<li>Obtain the single transformation that relates frame <code>&#123;N&#125;</code> and frame <code>&#123;0&#125;</code>:</li>
</ul>
<script type="math/tex; mode=display">{}_{N}^{0}T = {}_{1}^{0}T {}_{2}^{1}T {}_{3}^{2}T \cdots {}_{N}^{N - 1}T</script><p><strong>New objective:</strong><br>Find${}_{i}^{i - 1}T$</p>
<p><img src = "https://img.dexbug.com/i/2025/06/09/119hj1z.png"></p>
<p><strong>Conclusion:</strong></p>
<ul>
<li><p>The transformation from $\{i\}$to$\{i - 1\}$is a function of one variable and three parameters, which can be obtained by:</p>
<script type="math/tex; mode=display">{}^{i - 1}_{i}T = {}^{i - 1}_{L}T{}^{M}_{M}T{}^{R}_{R}T{}^{}_{i}T</script></li>
<li><p>The transformation from$\{N\}$to$\{0\}$is a function of$n$joint variables, which can be obtained by:</p>
<script type="math/tex; mode=display">{}^{0}_{N}T = {}^{1}_{0}T{}^{2}_{1}T{}^{3}_{2}T \cdots {}^{N}_{N - 1}T</script></li>
</ul>
<h2 id="Chap-3-Inverse-Manipulator-Kinematics"><a href="#Chap-3-Inverse-Manipulator-Kinematics" class="headerlink" title="Chap 3. Inverse Manipulator Kinematics"></a>Chap 3. Inverse Manipulator Kinematics</h2><p><strong>Manipulator Kinematics:</strong></p>
<blockquote>
<p>Find the position and orientation of the end-effector in the reference frame, given joint variables and parameters.</p>
</blockquote>
<p><strong>Inverse Manipulator Kinematics:</strong></p>
<blockquote>
<p>Find joint variables, given the position and orientation of the end-effector in the reference frame.</p>
</blockquote>
<h3 id="Sec-3-1-Solvability-Algebraic-Solution-and-Geometric-Solution"><a href="#Sec-3-1-Solvability-Algebraic-Solution-and-Geometric-Solution" class="headerlink" title="Sec 3.1: Solvability, Algebraic Solution and Geometric Solution"></a>Sec 3.1: Solvability, Algebraic Solution and Geometric Solution</h3><h4 id="Sec-3-1-1-Solvability"><a href="#Sec-3-1-1-Solvability" class="headerlink" title="Sec 3.1.1 Solvability"></a>Sec 3.1.1 Solvability</h4><h5 id="3-1-1-1-Existence-of-solutions"><a href="#3-1-1-1-Existence-of-solutions" class="headerlink" title="3.1.1.1 Existence of solutions"></a>3.1.1.1 Existence of solutions</h5><p><strong>Workspace:</strong></p>
<blockquote>
<p>Volume of space that the end-effector of the manipulator can reach.</p>
</blockquote>
<ul>
<li>Whether any solution exists depends on the manipulator’s workspace.</li>
<li>For a solution to exist, the specified goal point must lie within the workspace.</li>
<li>Workspace is determined by DoFs and parameters of a manipulator.</li>
</ul>
<h5 id="3-1-1-2-Multiple-solutions"><a href="#3-1-1-2-Multiple-solutions" class="headerlink" title="3.1.1.2 Multiple solutions"></a>3.1.1.2 Multiple solutions</h5><p>Multiple possible configurations of a manipulator may achieve the same position and orientation of the end effector.</p>
<p><strong>Selection criteria of solutions:</strong></p>
<ul>
<li>shortest distance rule</li>
<li>minimum energy consumption</li>
<li>maximum stability</li>
</ul>
<h5 id="3-1-1-3-Method-of-solution"><a href="#3-1-1-3-Method-of-solution" class="headerlink" title="3.1.1.3 Method of solution"></a>3.1.1.3 Method of solution</h5><p>Closed-form solutions:</p>
<ul>
<li>Algebraic solution</li>
<li>Geometric solution</li>
</ul>
<p>Numerical solutions (slower)</p>
<h4 id="Sec-3-1-2-Algebraic-solution"><a href="#Sec-3-1-2-Algebraic-solution" class="headerlink" title="Sec 3.1.2 Algebraic solution"></a>Sec 3.1.2 Algebraic solution</h4><p>Example: In the three-link planar manipulator, the angle between $\widehat{X}_{3}$ and $\widehat{X}_{0}$is$\varphi$, the position of joint 3 is $\begin{bmatrix} x &amp; y &amp; 0 \end{bmatrix}^T$, and the lengths of link 1 and link 2 are $L_{1}$ and $L_{2}$, respectively. Find $\theta_{1}$, $\theta_{2}$ and $\theta_{3}$.</p>
<p><img src = "https://img.dexbug.com/i/2025/06/09/12c4epk.png" width = 50%></p>
<p>The transformation matrix represented by position and orientation of the end-effector:</p>
<script type="math/tex; mode=display">\mathbf{^{0}_{3}T} = 
\begin{bmatrix}
c_{\varphi} & -s_{\varphi} & 0 & x \\
s_{\varphi} & c_{\varphi} & 0 & y \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><p>The D-H parameters:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>$i$</th>
<th>$\alpha_{i - 1}$</th>
<th>$a_{i - 1}$</th>
<th>$d_i$</th>
<th>$\theta_i$</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>$\theta_1$</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>$L_1$</td>
<td>0</td>
<td>$\theta_2$</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>$L_2$</td>
<td>0</td>
<td>$\theta_3$</td>
</tr>
</tbody>
</table>
</div>
<p>The transformation matrix represented by joint variables:</p>
<script type="math/tex; mode=display">
{}_{3}^{0}T = \begin{bmatrix}
c_{123} & -s_{123} & 0 & L_1c_1 + L_2c_{12} \\
s_{123} & c_{123} & 0 & L_1s_1 + L_2s_{12} \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><p>where $c_{123} = \cos(\theta_1 + \theta_2 + \theta_3)$ and $s_{123} = \sin(\theta_1 + \theta_2 + \theta_3)$</p>
<p>Comparing the two matrices, we can obtain:</p>
<script type="math/tex; mode=display">
c_{\varphi} = c_{123} \tag{1}</script><script type="math/tex; mode=display">
s_{\varphi} = s_{123} \tag{2}</script><script type="math/tex; mode=display">
x = L_1 c_1 + L_2 c_{12} \tag{3}</script><script type="math/tex; mode=display">
y = L_1 s_1 + L_2 s_{12} \tag{4}</script><p>By calculating $(3)^2+(4)^2$, we can obtain:</p>
<script type="math/tex; mode=display">
x^2 + y^2 = L_1^2 + L_2^2 + 2L_1 L_2 c_2</script><p>Therefore,</p>
<script type="math/tex; mode=display">
c_2 = \frac{(x^2 + y^2 - L_1^2 - L_1^2)}{(2L_1L_2)}</script><p>If $\left| \frac{x^2 + y^2 - L_1^2 - L_1^2}{2L_1L_2} \right| &gt; 1$, there is no solution;</p>
<p>If $\left| \frac{x^2 + y^2 - L_1^2 - L_1^2}{2L_1L_2} \right| &lt; 1$,</p>
<script type="math/tex; mode=display">c_2 = \frac{(x^2 + y^2 - L_1^2 - L_1^2)}{(2L_1L_2)}</script><script type="math/tex; mode=display">\theta_2 = \pm \arccos \left[ \frac{x^2 + y^2 - L_1^2 - L_1^2}{2L_1L_2} \right]</script><p>(3) and (4) can be written as:</p>
<script type="math/tex; mode=display">
\begin{align*}
x &= L_1c_1 + L_2(c_1c_2 - s_1s_2)\\
y &= L_1s_1 + L_2(c_1s_2 + s_1c_2)
\end{align*}</script><p>thus,</p>
<script type="math/tex; mode=display">
\begin{align*}
x &= (L_1 + L_2c_2)c_1 - (L_2s_2)s_1\\
y &= (L_1 + L_2c_2)s_1 + (L_2s_2)c_1
\end{align*}</script><p>$x$ and $y$ can be written as:</p>
<script type="math/tex; mode=display">
\begin{align*}
x &= k_1c_1 - k_2s_1 \tag{5}\\
y &= k_1s_1 + k_2c_1 \tag{6}
\end{align*}</script><p>where</p>
<script type="math/tex; mode=display">\begin{align*}
k_1 &= L_1 + L_2c_2\\
k_2 &= L_2s_2
\end{align*}</script><p>Let $r = \sqrt{k_1^2 + k_2^2}$ and $\gamma = \arctan\left(\frac{k_2}{k_1}\right)$</p>
<p>thus,</p>
<script type="math/tex; mode=display">
k_1 = r \cos \gamma \tag{7}</script><script type="math/tex; mode=display">
k_2 = r \sin \gamma \tag{8}</script><p>Substituting (7) and (8) into (5) and (6), we can obtain:</p>
<script type="math/tex; mode=display">
\gamma + \theta_1 = \arctan\left(\frac{y}{x}\right)</script><p>thus,</p>
<script type="math/tex; mode=display">
\theta_1 = \arctan\left(\frac{y}{x}\right) - \arctan\left(\frac{k_2}{k_1}\right)</script><p>As $\theta_1+\theta_2+\theta_3=\arctan\left(\frac{s_{\varphi}}{c_{\varphi}}\right)=\varphi$</p>
<p>$\theta_3 = \varphi-\theta_1-\theta_2$</p>
<h4 id="Sec-3-1-3-Geometric-solution"><a href="#Sec-3-1-3-Geometric-solution" class="headerlink" title="Sec 3.1.3 Geometric solution"></a>Sec 3.1.3 Geometric solution</h4><p>Example: In the three-link planar manipulator, the angle between $\hat{X}_3$ and $\hat{X}_0$ is $\varphi$, the position of joint 3 is $\begin{bmatrix}x&amp;y&amp;0\end{bmatrix}^T$, and the lengths of link 1 and link 2 are $L_1$ and $L_2$, respectively. Find $\theta_1$, $\theta_2$ and $\theta_3$.</p>
<p><img src = "https://img.dexbug.com/i/2025/06/09/12i7jpd.png" width = 50%></p>
<p>Red variables: variables to be found</p>
<p>Blue variables or parameters: known variables/parameters</p>
<p>Purple variables: intermediate variables</p>
<p>(1) Find $\theta_{2}$ by law of cosines:</p>
<script type="math/tex; mode=display">x^{2}+y^{2}=L_{1}^{2}+L_{2}^{2}-2L_{1}L_{2}\cos(-180 - \theta_{2})</script><p>Since $\cos(-\alpha)=\cos\alpha$, we have:</p>
<script type="math/tex; mode=display">x^{2}+y^{2}=L_{1}^{2}+L_{2}^{2}+2L_{1}L_{2}\cos\theta_{2}</script><p>Then, by the formula for $\cos\theta_{2}$:</p>
<script type="math/tex; mode=display">\cos\theta_{2}=\frac{x^{2}+y^{2}-L_{1}^{2}-L_{2}^{2}}{2L_{1}L_{2}}</script><p>If $\left|\frac{x^{2}+y^{2}-L_{1}^{2}-L_{2}^{2}}{2L_{1}L_{2}}\right| &gt; 1$, there is no solution;</p>
<p>If $\left|\frac{x^{2}+y^{2}-L_{1}^{2}-L_{2}^{2}}{2L_{1}L_{2}}\right| &lt; 1$, $\theta_{2}=\pm\arccos\left[\frac{x^{2}+y^{2}-L_{1}^{2}-L_{2}^{2}}{2L_{1}L_{2}}\right]$</p>
<p>(2) Find $\theta_1$:</p>
<p>$\beta=\arctan\left(\frac{y}{x}\right)$</p>
<p>Applying the law of cosines, we can obtain: $\cos\psi=\frac{x^{2}+y^{2}+L_{1}^{2}-L_{2}^{2}}{2L_{1}\sqrt{x^{2}+y^{2}}}$</p>
<p>$\psi = \arccos\frac{x^{2}+y^{2}+L_{1}^{2}-L_{2}^{2}}{2L_{1}\sqrt{x^{2}+y^{2}}}$</p>
<p>If $\theta_2 &lt; 0$, $\theta_1 = \beta + \psi = \arctan\left(\frac{y}{x}\right) + \arccos\frac{x^2 + y^2 + L_1^2 - L_2^2}{2L_1\sqrt{x^2 + y^2}}$</p>
<p>If$\theta_2 &gt; 0$, $\theta_1 = \beta - \psi = \arctan\left(\frac{y}{x}\right) - \arccos\frac{x^2 + y^2 + L_1^2 - L_2^2}{2L_1\sqrt{x^2 + y^2}}$</p>
<p>(3) Find $\theta_{3}$:</p>
<p>$\theta_{1}+\theta_{2}+\theta_{3}=\varphi$ </p>
<p>thus, $\theta_{3}=\varphi - \theta_{1}-\theta_{2}$</p>
<h3 id="Sec-3-2-Pieper’s-Solution-When-Three-Axes-Intersect"><a href="#Sec-3-2-Pieper’s-Solution-When-Three-Axes-Intersect" class="headerlink" title="Sec 3.2 Pieper’s Solution When Three Axes Intersect"></a>Sec 3.2 Pieper’s Solution When Three Axes Intersect</h3><p><strong>Problem description:</strong><br>A manipulator has six revolute joints, <strong>with the last three axes intersecting</strong>. (Including the last three axes paralleling) The position and orientation of the end-effector are described by $^0\boldsymbol{P}_{4ORG}$ and $^6\boldsymbol{R}$, respectively. $^0\boldsymbol{P}_{4ORG} = \begin{bmatrix} x \\ y \\ z \end{bmatrix}$. Given $x$, $y$, $z$ and $^6\boldsymbol{R}$, find the six joint angles.</p>
<p>Solution:</p>
<p>(1) Derive the equation of $^{0}\boldsymbol{P}_{4ORG}$, $\theta_{1}$, $\theta_{2}$ and $\theta_{3}$:</p>
<p>According to D-H notation rule,</p>
<script type="math/tex; mode=display">
^{i - 1}_{i}T=^{i - 1}_{L}T^{L}_{M}T^{M}_{R}T^{R}_{i}T</script><p>where</p>
<script type="math/tex; mode=display">
^{i - 1}_{L}T=\left[\begin{array}{cc}R(x,\alpha_{i - 1})&\boldsymbol{0}\\\boldsymbol{0}&1\end{array}\right],R(x,\alpha_{i - 1})=\left[\begin{array}{ccc}1&0&0\\0&\cos\alpha_{i - 1}&-\sin\alpha_{i - 1}\\0&\sin\alpha_{i - 1}&\cos\alpha_{i - 1}\end{array}\right]</script><script type="math/tex; mode=display">
^{L}_{M}T=\left[\begin{array}{cc}I_{3}&D(x,\alpha_{i - 1})\\\boldsymbol{0}&1\end{array}\right],D(x,\alpha_{i - 1})=\left[\begin{array}{c}a_{i - 1}\\0\\0\end{array}\right]^{T}</script><script type="math/tex; mode=display">
\mathbf{^M_RT} = \begin{bmatrix}
\mathbf{R}(z, \theta_i) & \mathbf{0} \\
\mathbf{0} & 1
\end{bmatrix},
\mathbf{R}(z, \theta_i) = \begin{bmatrix}
\cos\theta_i & -\sin\theta_i & 0 \\
\sin\theta_i & \cos\theta_i & 0 \\
0 & 0 & 1
\end{bmatrix}</script><script type="math/tex; mode=display">
\mathbf{^R_iT} = \begin{bmatrix}
\mathbf{I}_3 & \mathbf{D}(z, d_i) \\
\mathbf{0} & 1
\end{bmatrix},
\mathbf{D}(z, d_i) = \begin{bmatrix}
0 & 0 & d_i
\end{bmatrix}^T</script><p>thus,</p>
<script type="math/tex; mode=display">
\mathbf{^{i - 1}_iT} = \begin{bmatrix}
c\theta_i & -s\theta_i & 0 & a_{i - 1} \\
s\theta_i c\alpha_{i - 1} & c\theta_i c\alpha_{i - 1} & -s\alpha_{i - 1} & -s\alpha_{i - 1} d_i \\
s\theta_i s\alpha_{i - 1} & c\theta_i s\alpha_{i - 1} & c\alpha_{i - 1} & c\alpha_{i - 1} d_i \\
0 & 0 & 0 & 1
\end{bmatrix} \tag{1}</script><p>where $c$ represents $\cos$, $s$ represents $\sin$, and $\alpha$ represents other angles in the Denavit-Hartenberg convention.</p>
<p>As the last three axes intersect, the origins of link frames $\{4\}$, $\{5\}$ and $\{6\}$ are all located at the point of intersection, which can be given by:</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
\boldsymbol{^0P_{4ORG}} \\
1
\end{bmatrix}
= \boldsymbol{^0T_1^1T_2^2T_3}
\begin{bmatrix}
\boldsymbol{^3P_{4ORG}} \\
1
\end{bmatrix}
= \begin{bmatrix}
x & y & z & 1
\end{bmatrix}^T</script><p>using the fourth column of (1) for $i = 4$,</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
\boldsymbol{^0P_{4ORG}} \\
1
\end{bmatrix}
= \boldsymbol{^0T_1^1T_2^2T_3}
\begin{bmatrix}
a_3 \\
-s\alpha_3d_4 \\
c\alpha_3d_4 \\
1
\end{bmatrix}
\tag{2}</script><p>Equation (2) can be written as:</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
\boldsymbol{^0P_{4ORG}} \\
1
\end{bmatrix} = \boldsymbol{^0T_1 ^1T_2}
\begin{bmatrix}
f_1(\theta_3) \\
f_2(\theta_3) \\
f_3(\theta_3) \\
1
\end{bmatrix}
\tag{3}</script><p>where,</p>
<script type="math/tex; mode=display">\begin{bmatrix}
f_1 \\
f_2 \\
f_3 \\
1
\end{bmatrix} = \boldsymbol{^2T_3}
\begin{bmatrix}
a_3 \\
-s\alpha_3d_4 \\
c\alpha_3d_4 \\
1
\end{bmatrix} = 
\begin{bmatrix}
a_3c_3 + d_4s\alpha_3s_3 + a_2 \\
a_3c\alpha_2s_3 - d_4s\alpha_3c\alpha_2c_3 - d_4s\alpha_2c\alpha_3 - d_3s\alpha_2 \\
a_3s\alpha_2s_3 - d_4s\alpha_3s\alpha_2c_3 + d_4c\alpha_2c\alpha_3 + d_3c\alpha_2 \\
1
\end{bmatrix}</script><p>Using Equation (1) for ${}_1^0T$ and ${}_2^1T$ in Equation (3), we obtain:</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
{}^0\boldsymbol{P}_{4ORG} \\
1
\end{bmatrix} =
\begin{bmatrix}
c_1g_1 - s_1g_2 \\
s_1g_1 + c_1g_2 \\
g_3 \\
1
\end{bmatrix}
\tag{4}</script><p>where,</p>
<script type="math/tex; mode=display">
\begin{align*}
g_1 &= c_2f_1 - s_2f_2 + a_1 \\
g_2 &= s_2c\alpha_1f_1 + c_2c\alpha_1f_2 - s\alpha_1f_3 - d_2s\alpha_1 \\
g_3 &= s_2s\alpha_1f_1 + c_2s\alpha_1f_2 + c\alpha_1f_3 + d_2c\alpha_1
\end{align*}</script><p>$r$ is defined as the squared magnitude of ${}^0\boldsymbol{P}_{4ORG}$, thus</p>
<script type="math/tex; mode=display">
r = x^2 + y^2 + z^2 \tag{5}</script><p>We write the equation of $r$ obtained by substituting (4) into (5), and along with the z-component equation from (4):</p>
<script type="math/tex; mode=display">
\begin{align*}
r &= (k_1c_2 + k_2s_2)2a_1 + k_3 \\
z &= (k_1s_2 - k_2c_2)s\alpha_1 + k_4
\end{align*} \tag{6}</script><p>where,</p>
<script type="math/tex; mode=display">
\begin{align*}
k_1 &= f_1 \\
k_2 &= -f_2 \\
k_3 &= f_1^2 + f_2^2 + f_3^2 + a_1^2 + d_2^2 + 2d_2f_3 \\
k_4 &= f_3c\alpha_1 + d_2c\alpha_1
\end{align*}</script><p>(2) Find the solution of Equation (6) for $\theta_3$:</p>
<p>If $a_1 = 0$,</p>
<script type="math/tex; mode=display">
r = k_3 \tag{7}</script><p>If$s\alpha_1 = 0$,</p>
<script type="math/tex; mode=display">
z = k_4 \tag{8}</script><p>Otherwise,</p>
<script type="math/tex; mode=display">
\frac{(r - k_3)^2}{4a_1^2} + \frac{(z - k_4)^2}{s^2\alpha_1} = k_1^2 + k_2^2 \tag{9}</script><p>Equations (7), (8) and (9) can be solved by the universal equation of circular functions.</p>
<p>(3) Find $\theta_1$ and $\theta_2$:</p>
<p>Given $\theta_3$, we can solve Equation (6) for $\theta_2$ and solve Equation (4) for $\theta_1$.</p>
<p>(4) Find $\theta_4$, $\theta_5$ and $\theta_6$:</p>
<p>As $\theta_1$, $\theta_2$ and $\theta_3$ are known, the rotation matrix from $\{3\}$ to $\{0\}$ $^0R$ is known. $^3R$ is the function of $\theta_4$, $\theta_5$ and $\theta_6$.</p>
<p>Since $^0R^3R = ^6R$, we can obtain</p>
<script type="math/tex; mode=display">
{}^3R = {}^0R^{-1} {}^6R \tag{10}</script><p>$\theta_4$, $\theta_5$and$\theta_6$ can be solved by Equation (10).</p>
<h2 id="Chap-4-Velocities-and-Static-Forces"><a href="#Chap-4-Velocities-and-Static-Forces" class="headerlink" title="Chap 4. Velocities and Static Forces"></a>Chap 4. Velocities and Static Forces</h2><h3 id="Sec-4-1-Velocity-of-rigid-body-and-velocity-propagation-from-link-to"><a href="#Sec-4-1-Velocity-of-rigid-body-and-velocity-propagation-from-link-to" class="headerlink" title="Sec 4.1 Velocity of rigid body and velocity propagation from link to"></a>Sec 4.1 Velocity of rigid body and velocity propagation from link to</h3><h4 id="Sec-4-1-1-Differentiation-of-position-vectors"><a href="#Sec-4-1-1-Differentiation-of-position-vectors" class="headerlink" title="Sec 4.1.1 Differentiation of position vectors"></a>Sec 4.1.1 Differentiation of position vectors</h4><p>The derivative of vector $\boldsymbol{Q}$ relative to frame $\{B\}$ is denoted as:</p>
<script type="math/tex; mode=display">
^{B}\boldsymbol{V}_{Q} = \frac{d}{dt} ^{B}\boldsymbol{Q} = \lim_{\Delta t \to 0} \frac{^{B}\boldsymbol{Q}(t + \Delta t) - ^{B}\boldsymbol{Q}(t)}{\Delta t}</script><p>The velocity vector described in frame $\{A\}$ is denoted as ${}^{A}({}^{B}\boldsymbol{V}_{Q})$.</p>
<blockquote>
<p>${}^{B}({}^{B}\boldsymbol{V}_{Q})$ can be written as ${}^{B}\boldsymbol{V}_{Q}$.</p>
<p>${}^{A}({}^{B}\boldsymbol{V}_{Q})$: the velocity of $Q$ relative to $\{B\}$ represented in $\{A\}$</p>
<p>${}^{A}\boldsymbol{v}_{C}$: the velocity of origin of $\{C\}$ (relative to certain frame) described in $\{A\}$</p>
</blockquote>
<p>The change of reference frame can be achieved by rotation matrix:</p>
<script type="math/tex; mode=display">
{}^{A}(^{B}\boldsymbol{V}_{Q}) = {}_{B}^{A}\boldsymbol{R}\,{}^{B}\boldsymbol{V}_{Q}</script><h4 id="Sec-4-1-2-Angular-velocity-vector"><a href="#Sec-4-1-2-Angular-velocity-vector" class="headerlink" title="Sec 4.1.2 Angular velocity vector"></a>Sec 4.1.2 Angular velocity vector</h4><p>The angular velocity of rotation of $\{B\}$ relative to $\{A\}$ is notated as $^{A}\boldsymbol{\Omega}_{B}$. The direction of $^{A}\boldsymbol{\Omega}_{B}$ indicates the instantaneous axis of rotation of $\{B\}$ relative to $\{A\}$; the magnitude of $^{A}\boldsymbol{\Omega}_{B}$ indicates the speed of rotation.</p>
<p>The angular velocity of $\{B\}$relative to$\{A\}$described in$\{C\}$is notated as$^{C}(^{A}\boldsymbol{\Omega}_{B})$.</p>
<p>A simplified notation: $^{C}\boldsymbol{\omega}_{B} = ^{C}(^{A}\boldsymbol{\Omega}_{B})$</p>
<blockquote>
<p>$^{C}(^{A}\boldsymbol{\Omega}_{B})$: the rotation velocity of $\{B\}$relative to$\{A\}$described in$\{C\}$</p>
<p>$^{C}\boldsymbol{\omega}_{B}$: the rotation velocity of $\{B\}$(relative to$\{A\}$) described in $\{C\}$</p>
</blockquote>
<h4 id="Sec-4-1-3-Linear-velocity"><a href="#Sec-4-1-3-Linear-velocity" class="headerlink" title="Sec 4.1.3 Linear velocity"></a>Sec 4.1.3 Linear velocity</h4><p>If the relative orientation of $\{B\}$ and $\{A\}$ remains constant and the velocity of origin of $\{B\}$relative to$\{A\}$ is ${}^A\boldsymbol{V}_{BORG}$, given motion of point $Q$ relative to $\{B\}$ (described in $\{B\}$), motion of  $Q$ relative to $\{A\}$(described in $\{A\}$) can be obtained by:</p>
<script type="math/tex; mode=display">
{}^A\boldsymbol{V}_{Q} = {}^A\boldsymbol{V}_{BORG} + {}^A({}^B\boldsymbol{V}_{Q})</script><script type="math/tex; mode=display">
{}^A\boldsymbol{V}_{Q} = {}^A\boldsymbol{V}_{BORG} + {}_B^A\boldsymbol{R} {}^B\boldsymbol{V}_{Q}</script><ul>
<li>${}^A\boldsymbol{V}_{Q}$: <strong>velocity of $Q$ relative to $\{A\}$</strong></li>
<li>${}^A\boldsymbol{V}_{BORG}$: <strong>velocity of $\{B\}$ relative to $\{A\}$</strong></li>
<li>${}_B^A\boldsymbol{R} {}^B\boldsymbol{V}_{Q}$: <strong>velocity of $Q$ relative to$\{B\}$</strong></li>
</ul>
<h4 id="Sec-4-1-4-Rotational-velocity"><a href="#Sec-4-1-4-Rotational-velocity" class="headerlink" title="Sec 4.1.4 Rotational velocity"></a>Sec 4.1.4 Rotational velocity</h4><p>If $\{B\}$and$\{A\}$ have coincident origins and zero linear relative velocity and the angular velocity of $\{B\}$ relative to $\{A\}$ is ${}^A\boldsymbol{\Omega}_B$, given ${}^B\boldsymbol{V}_Q$, the velocity of $\boldsymbol{Q}$ described in $\{A\}$ can be obtained by:</p>
<script type="math/tex; mode=display">
{}^A\boldsymbol{V}_Q = {}^A({}^B\boldsymbol{V}_Q) + {}^A\boldsymbol{\Omega}_B \times {}^A\boldsymbol{Q}</script><script type="math/tex; mode=display">
{}^A\boldsymbol{V}_Q = {}_{B}^A\boldsymbol{R} {}^B\boldsymbol{V}_Q + {}^A\boldsymbol{\Omega}_B \times {}_{B}^A\boldsymbol{R} {}^B\boldsymbol{Q}</script><p>where:</p>
<ul>
<li>${}^A\boldsymbol{V}_Q$: <strong>velocity of $\boldsymbol{Q}$ relative to $\{A\}$</strong></li>
<li>${}^B\boldsymbol{V}_Q$: <strong>velocity of $\boldsymbol{Q}$ relative to $\{B\}$</strong></li>
<li>${}^A\boldsymbol{\Omega}_B \times {}_{B}^A\boldsymbol{R} {}^B\boldsymbol{Q}$: <strong>velocity of $\{B\}$ relative to $\{A\}$</strong></li>
</ul>
<h4 id="Sec-4-1-5-Simultaneous-linear-and-rotational-velocity"><a href="#Sec-4-1-5-Simultaneous-linear-and-rotational-velocity" class="headerlink" title="Sec 4.1.5 Simultaneous linear and rotational velocity"></a>Sec 4.1.5 Simultaneous linear and rotational velocity</h4><p>The velocity of origin of $\{B\}$ relative to $\{A\}$ is ${}^A\boldsymbol{V}_{BORG}$. The angular velocity of $\{B\}$ relative to $\{A\}$ is ${}^A\boldsymbol{\Omega}_B$. Given ${}^B\boldsymbol{V}_Q$, the velocity of $\boldsymbol{Q}$ described in $\{A\}$ can be obtained by:</p>
<script type="math/tex; mode=display">
{}^A\boldsymbol{V}_Q = {}^A\boldsymbol{V}_{BORG} + {}_{B}^{A}\boldsymbol{R}\,{}^B\boldsymbol{V}_Q + {}^A\boldsymbol{\Omega}_B \times {}_{B}^{A}\boldsymbol{R}\,{}^B\boldsymbol{Q}</script><ul>
<li>${}^A\boldsymbol{V}_Q$: velocity of $\boldsymbol{Q}$ relative to $\{A\}$</li>
<li>${}^A\boldsymbol{V}_{BORG}$: linear velocity of $\{B\}$ relative to $\{A\}$</li>
<li>${}^B\boldsymbol{V}_Q$: velocity of $\boldsymbol{Q}$ relative to $\{B\}$</li>
<li>${}^A\boldsymbol{\Omega}_B$: angular velocity of $\{B\}$ relative to $\{A\}$</li>
</ul>
<h4 id="Sec-4-1-6-Velocity-propagation-from-link-to-link"><a href="#Sec-4-1-6-Velocity-propagation-from-link-to-link" class="headerlink" title="Sec 4.1.6 Velocity propagation from link to link"></a>Sec 4.1.6 Velocity propagation from link to link</h4><p>$v_i$ denotes the linear velocity of the origin of the attached frame $\{i\}$.</p>
<p>$\omega_i$ denotes the angular velocity of the attached frame $\{i\}$.</p>
<p><img src = "https://img.dexbug.com/i/2025/06/11/qz58k1.png" width = 70%></p>
<p>If joint $i + 1$ is a revolute joint:</p>
<p>The angular velocity of link $i + 1$ is the same as that of link $i$ plus a new component caused by rotational velocity at joint $i + 1$.</p>
<script type="math/tex; mode=display">
^i\omega_{i + 1} = {}^i\omega_i + {}_{i + 1}^iR\dot{\theta}_{i + 1}{}^{i + 1}\widehat{Z}_{i + 1}\tag{1}</script><p>By premultiplying both sides of (1) by ${}_{i + 1}^iR$, we can obtain:</p>
<script type="math/tex; mode=display">
^{i + 1}\omega_{i + 1} = {}_{i}^{i+1}R\ {}^i\omega_i + \dot{\theta}_{i + 1}{}^{i + 1}\widehat{Z}_{i + 1}\tag{2}</script><p>The linear velocity of the origin of frame $\{i+1\}$ is the same as that of the origin of frame $\{i\}$ plus a new component caused by rotational velocity of link $i$.</p>
<script type="math/tex; mode=display">
^{i}\boldsymbol{v}_{i+1} = ^{i}\boldsymbol{v}_{i} + ^{i}\boldsymbol{\omega}_{i} \times ^{i}\boldsymbol{P}_{i+1} \tag{3}</script><p>Thus,</p>
<script type="math/tex; mode=display">
^{i+1}\boldsymbol{v}_{i+1} = ^{i+1}_{i}R(^{i}\boldsymbol{v}_{i} + ^{i}\boldsymbol{\omega}_{i} \times ^{i}\boldsymbol{P}_{i+1}) \tag{4}</script><p>If joint $i+1$ is a prismatic joint:</p>
<p>Equations (2) and (4) are changed to the following equations:</p>
<script type="math/tex; mode=display">
^{i+1}\boldsymbol{\omega}_{i+1} = {}^{i+1}_{i}R \ ^{i}\boldsymbol{\omega}_{i} \tag{5}</script><script type="math/tex; mode=display">
^{i+1}\boldsymbol{v}_{i+1} = {}^{i+1}_{i}R \left( \ ^{i}\boldsymbol{v}_{i} + \ ^{i}\boldsymbol{\omega}_{i} \times \ ^{i}\boldsymbol{P}_{i+1} \right) + \dot{d}_{i+1} \ ^{i+1}\boldsymbol{\hat{Z}}_{i+1} \tag{6}</script><h3 id="Sec-4-2-Jacobians-and-static-forces-in-manipulators"><a href="#Sec-4-2-Jacobians-and-static-forces-in-manipulators" class="headerlink" title="Sec 4.2 Jacobians and static forces in manipulators"></a>Sec 4.2 Jacobians and static forces in manipulators</h3><h4 id="Sec-4-2-1-Jacobian"><a href="#Sec-4-2-1-Jacobian" class="headerlink" title="Sec 4.2.1 Jacobian"></a>Sec 4.2.1 Jacobian</h4><p>Jacobians can be used to relate joint velocities to Cartesian velocities of the end-effector:</p>
<script type="math/tex; mode=display">
^0\boldsymbol{u} = ^0J(\boldsymbol{\theta})\dot{\boldsymbol{\theta}}</script><p>$\boldsymbol{\theta}$: the vector of joint angles of the manipulator</p>
<p>$\boldsymbol{u}$: a vector of Cartesian velocities</p>
<p>For a robotic manipulator with 6 degrees of freedom, the Jacobian is $6 \times 6$, $\dot{\boldsymbol{\theta}}$ is $6 \times 1$, and $^0\boldsymbol{u}$ is $6 \times 1$.</p>
<p>The Cartesian velocity vector $^0\boldsymbol{u}$ consists of a $3 \times 1$ linear velocity vector and a $3 \times 1$ rotational velocity vector:</p>
<script type="math/tex; mode=display">
^0\boldsymbol{u} = \begin{bmatrix} ^0\boldsymbol{v} \\ ^0\boldsymbol{\omega} \end{bmatrix}</script><p>$6\times1$ Cartesian velocity vector given in $\{B\}$ can be described relative in $\{A\}$ by the transformation:</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
^A\boldsymbol{v}\\
^A\boldsymbol{\omega}
\end{bmatrix} =
\begin{bmatrix}
^A{}_B^R & 0\\
0 & {}_B^R
\end{bmatrix}
\begin{bmatrix}
^B\boldsymbol{v}\\
^B\boldsymbol{\omega}
\end{bmatrix}</script><p>The Jacobian relates joint velocities to Cartesian velocities in $\{B\}$ and in $\{A\}$:</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
^B\boldsymbol{v} \\
^B\boldsymbol{\omega}
\end{bmatrix} = {}^B\boldsymbol{u} = {}^BJ(\boldsymbol{\Theta})\dot{\boldsymbol{\Theta}}
\quad
\begin{bmatrix}
^A\boldsymbol{v} \\
^A\boldsymbol{\omega}
\end{bmatrix} = {}^A\boldsymbol{u} = {}^AJ(\boldsymbol{\Theta})\dot{\boldsymbol{\Theta}}</script><p>Change the reference frame of a Jacobian:</p>
<script type="math/tex; mode=display">
{}^AJ(\boldsymbol{\Theta})\dot{\boldsymbol{\Theta}} = 
\begin{bmatrix}
^A\boldsymbol{v} \\
^A\boldsymbol{\omega}
\end{bmatrix} =
\begin{bmatrix}
{}_{B}^{A}R & 0 \\
0 & {}_{B}^{A}R
\end{bmatrix}
\begin{bmatrix}
^B\boldsymbol{v} \\
^B\boldsymbol{\omega}
\end{bmatrix} =
\begin{bmatrix}
{}_{B}^{A}R & 0 \\
0 & {}_{B}^{A}R
\end{bmatrix}
{}^BJ(\boldsymbol{\Theta})\dot{\boldsymbol{\Theta}}</script><script type="math/tex; mode=display">
{}^AJ(\boldsymbol{\Theta}) = 
\begin{bmatrix}
{}_{B}^{A}R & 0 \\
0 & {}_{B}^{A}R
\end{bmatrix}
{}^BJ(\boldsymbol{\Theta})</script><h4 id="Sec-4-2-2-Static-forces-in-manipulators"><a href="#Sec-4-2-2-Static-forces-in-manipulators" class="headerlink" title="Sec 4.2.2 Static forces in manipulators"></a>Sec 4.2.2 Static forces in manipulators</h4><p><strong>Problem description</strong></p>
<p>A manipulator is pushing on something in the environment with the end-effector or is supporting a load at the end-effector. Solve for the joint torques that must be acting to keep the system in static equilibrium.</p>
<p>The forces on the links due to gravity are not considered.</p>
<ul>
<li><p>$^i\boldsymbol{f}_i$: force exerted on link $i$ by link $i - 1$</p>
</li>
<li><p>$^i\boldsymbol{n}_i$: torque exerted on link $i$ by link $i - 1$</p>
</li>
</ul>
<p><img src = "https://img.dexbug.com/i/2025/06/11/r8owb6.png" width = 70%></p>
<p>As the manipulator is in static equilibrium, we have</p>
<p>Calculation of the force and moment applied by each link (from end-effector to base):</p>
<script type="math/tex; mode=display">
\boldsymbol{^i f_i} = \boldsymbol{^i f_{i+1}} \tag{1}</script><script type="math/tex; mode=display">
\boldsymbol{^i n_i} = \boldsymbol{^i n_{i+1}} + \boldsymbol{^i P_{i+1}} \times \boldsymbol{^i f_{i+1}} \tag{2}</script><p>Equations in terms of only forces and moments defined within their own link frames (static force “propagation” from link to link):</p>
<script type="math/tex; mode=display">
\boldsymbol{^i f_i} = {_{i+1}^i R} \boldsymbol{^{i+1} f_{i+1}} \tag{3}</script><script type="math/tex; mode=display">
\boldsymbol{^i n_i} = {_{i+1}^i R} \boldsymbol{^{i+1} n_{i+1}} + \boldsymbol{^i P_{i+1}} \times \boldsymbol{^i f_i} \tag{4}</script><p>All components of the force and moment vectors are resisted by the structure of the mechanism itself, except for the torque about the joint axis.</p>
<p>Therefore, the joint torque/force required to maintain the static equilibrium:</p>
<script type="math/tex; mode=display">
\begin{align*}
\tau_i &= {^i\boldsymbol{n}_i}^T \ {^i\widehat{\boldsymbol{Z}}}_i \\
\tau_i &= {^i\boldsymbol{f}_i}^T \ {^i\widehat{\boldsymbol{Z}}}_i
\end{align*}</script><h2 id="Chap-5-Dynamics-of-Manipulators"><a href="#Chap-5-Dynamics-of-Manipulators" class="headerlink" title="Chap 5. Dynamics of Manipulators"></a>Chap 5. Dynamics of Manipulators</h2><h3 id="Sec-5-1-Jacobian"><a href="#Sec-5-1-Jacobian" class="headerlink" title="Sec 5.1 Jacobian"></a>Sec 5.1 Jacobian</h3><p>In the previous section, we have talked about the Jacobian. And now we will talk how to get Jacobian from the manipulator’s kinematic model.</p>
<p><img src = "https://img.dexbug.com/i/2025/06/13/sf7dqv.png" width = 50%></p>
<p>Find the Jacobian of the manipulator with three degrees of freedom from the figure above. Write it in terms of a frame $\{4\}$ located at the tip of the hand and having the same orientation as frame $\{3\}$. Derive the Jacobian in three different ways: velocity propagation from base to tip, static force propagation from tip to base, and (optional) by direct differentiation of the kinematic equations.</p>
<h4 id="Sec-5-1-1-Forward-Kinematics"><a href="#Sec-5-1-1-Forward-Kinematics" class="headerlink" title="Sec 5.1.1 Forward Kinematics"></a>Sec 5.1.1 Forward Kinematics</h4><p>The D-H parameters of the manipulator and the transformation matrices:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">$\alpha_{i - 1}$</th>
<th style="text-align:center">$a_{i - 1}$</th>
<th style="text-align:center">$d_{i}$</th>
<th style="text-align:center">$\theta _{i}$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\theta _{1}$</td>
</tr>
<tr>
<td style="text-align:center">$90^{\circ}$</td>
<td style="text-align:center">$L_{1}$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\theta _{2}$</td>
</tr>
<tr>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$L_{2}$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\theta _{3}$</td>
</tr>
</tbody>
</table>
</div>
<script type="math/tex; mode=display">
^0T_1 = 
\begin{bmatrix}
C_1 & -S_1 & 0 & 0 \\
S_1 & C_1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><script type="math/tex; mode=display">
^1T_2 = 
\begin{bmatrix}
C_2 & -S_2 & 0 & L_1 \\
0 & 0 & -1 & 0 \\
S_2 & C_2 & 0 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><script type="math/tex; mode=display">{^3T} = 
\begin{bmatrix}
C_3 & -S_3 & 0 & L_2 \\
S_3 & C_3 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><script type="math/tex; mode=display">
{}_{W}^{B}T = {}_{3}^{0}T \cdot {}_{1}^{0}T_{2}^{2}T_{3}^{3}</script><script type="math/tex; mode=display">
^B_T \mathbf{T} = 
\begin{bmatrix}
C_1C_{23} & -C_1S_{23} & S_1 & L_1C_1 + L_2C_1C_2 \\
S_1C_{23} & -S_1S_{23} & -C_1 & L_1S_1 + L_2S_1C_2 \\
S_{23} & C_{23} & 0 & L_2S_2 \\
0 & 0 & 0 & 1
\end{bmatrix}</script><h4 id="Sec-5-1-2-Velocity-Analysis"><a href="#Sec-5-1-2-Velocity-Analysis" class="headerlink" title="Sec 5.1.2 Velocity Analysis"></a>Sec 5.1.2 Velocity Analysis</h4><script type="math/tex; mode=display">
^{1}w_{1}={_{0}^{1}R}{^{0}w_{0}}+\dot{\theta}_{1}{^{1}z_{1}}=\dot{\theta}_{1}\hat{z}</script><script type="math/tex; mode=display">
^{1}v_{1}={_{0}^{1}R}({^{0}v_{0}}+{^{0}w_{0}}\times{^{0}p_{1}})=0</script><script type="math/tex; mode=display">
^{2}w_{2}={_{1}^{2}R}{^{1}w_{1}}+\dot{\theta}_{2}{^{2}\hat{z}_{2}}</script><script type="math/tex; mode=display">^{2}w_{2}=\begin{bmatrix}C_{2}&0&S_{2}\\-S_{2}&0&C_{2}\\0&-1&0\end{bmatrix}\begin{bmatrix}0\\0\\\dot{\theta}_{1}\end{bmatrix}+\begin{bmatrix}0\\0\\\dot{\theta}_{2}\end{bmatrix}=\begin{bmatrix}S_{2}\dot{\theta}_{1}\\C_{2}\dot{\theta}_{1}\\\dot{\theta}_{2}\end{bmatrix}</script><script type="math/tex; mode=display">
^{2}v_{2}={_{1}^{2}R}({^{1}v_{1}}+{^{1}w_{1}}\times{^{1}p_{2}})</script><script type="math/tex; mode=display">
^{2}v_{2}=\begin{bmatrix}C_{2}&0&S_{2}\\-S_{2}&0&C_{2}\\0&-1&0\end{bmatrix}\bigg(\begin{bmatrix}0\\0\\0\end{bmatrix}+\begin{bmatrix}0\\0\\\dot{\theta}_{1}\end{bmatrix}\times\begin{bmatrix}L_{1}\\0\\0\end{bmatrix}\bigg)</script><script type="math/tex; mode=display">
^{2}v_{2}=\begin{bmatrix}C_{2}&0&S_{2}\\-S_{2}&0&C_{2}\\0&-1&0\end{bmatrix}\begin{bmatrix}0\\L_{1}\dot{\theta}_{1}\\0\end{bmatrix}=\begin{bmatrix}0\\0\\-L_{1}\dot{\theta}_{1}\end{bmatrix}</script><script type="math/tex; mode=display">
^{3}w_{3}={_{2}^{3}R}{^{2}w_{2}}+\dot{\theta}_{3}{^{3}\hat{z}_{3}}</script><script type="math/tex; mode=display">
^{3}w_{3}=\begin{bmatrix}C_{3}&S_{3}&0\\-S_{3}&C_{3}&0\\0&0&1\end{bmatrix}\begin{bmatrix}S_{2}\dot{\theta}_{1}\\C_{2}\dot{\theta}_{1}\\\dot{\theta}_{2}\end{bmatrix}+\begin{bmatrix}0\\0\\\dot{\theta}_{3}\end{bmatrix}=\begin{bmatrix}S_{2}C_{3}\dot{\theta}_{1}+C_{2}S_{3}\dot{\theta}_{1}\\-S_{2}S_{3}\dot{\theta}_{1}+C_{2}C_{3}\dot{\theta}_{1}\\\dot{\theta}_{2}+\dot{\theta}_{3}\end{bmatrix}</script><script type="math/tex; mode=display">
^{3}w_{3}=\begin{bmatrix}S_{23}\dot{\theta}_{1}\\C_{23}\dot{\theta}_{1}\\\dot{\theta}_{2}+\dot{\theta}_{3}\end{bmatrix}</script><script type="math/tex; mode=display">
^{3}v_{3}={_{2}^{3}R}({^{2}v_{2}}+{^{2}w_{2}}\times{^{2}p_{3}})</script><script type="math/tex; mode=display">
^{3}v_{3}={_{2}^{3}R}\bigg(\begin{bmatrix}0\\0\\-L_{1}\dot{\theta}_{1}\end{bmatrix}+\begin{bmatrix}S_{2}\dot{\theta}_{1}\\C_{2}\dot{\theta}_{1}\\\dot{\theta}_{2}\end{bmatrix}\times\begin{bmatrix}L_{2}\\0\\0\end{bmatrix}\bigg)</script><script type="math/tex; mode=display">
^{3}v_{3}=\begin{bmatrix}C_{3}&S_{3}&0\\-S_{3}&C_{3}&0\\0&0&1\end{bmatrix}\begin{bmatrix}0\\L_{2}\dot{\theta}_{2}\\-L_{1}\dot{\theta}_{1}-L_{2}C_{2}\dot{\theta}_{1}\end{bmatrix}=\begin{bmatrix}L_{2}S_{3}\dot{\theta}_{2}\\L_{2}C_{3}\dot{\theta}_{2}\\-L_{1}\dot{\theta}_{1}-L_{2}C_{2}\dot{\theta}_{1}\end{bmatrix}</script><script type="math/tex; mode=display">
^{4}w_{4}={_{3}^{4}R}{^{3}w_{3}}+O;\ {_{3}^{4}R}=I;\ ^{4}w_{4}={^{3}w_{3}}</script><script type="math/tex; mode=display">
^{4}v_{4}={_{3}^{4}R}({^{3}v_{3}}+{^{3}w_{3}}\times{^{3}p_{4}})</script><script type="math/tex; mode=display">
^{4}v_{4}={_{3}^{4}R}\bigg(\begin{bmatrix}L_{2}S_{3}\dot{\theta}_{2}\\L_{2}C_{3}\dot{\theta}_{2}\\-L_{1}\dot{\theta}_{1}-L_{2}C_{2}\dot{\theta}_{1}\end{bmatrix}+\begin{bmatrix}S_{23}\dot{\theta}_{1}\\C_{23}\dot{\theta}_{1}\\\dot{\theta}_{2}+\dot{\theta}_{3}\end{bmatrix}\times\begin{bmatrix}L_{3}\\0\\0\end{bmatrix}\bigg)</script><script type="math/tex; mode=display">
^{4}v_{4}=\bigg(\begin{bmatrix}L_{2}S_{3}\dot{\theta}_{2}\\L_{2}C_{3}\dot{\theta}_{2}\\-L_{1}\dot{\theta}_{1}-L_{2}C_{2}\dot{\theta}_{1}\end{bmatrix}+\begin{bmatrix}0\\L_{3}(\dot{\theta}_{2}+\dot{\theta}_{3})\\-L_{3}C_{23}\dot{\theta}_{1}\end{bmatrix}\bigg)</script><script type="math/tex; mode=display">
^{4}v_{4}=\begin{bmatrix}L_{2}S_{3}\dot{\theta}_{2}\\L_{2}C_{3}\dot{\theta}_{2}+L_{3}(\dot{\theta}_{2}+\dot{\theta}_{3})\\-L_{1}\dot{\theta}_{1}-L_{2}C_{2}\dot{\theta}_{1}-L_{3}C_{23}\dot{\theta}_{1}\end{bmatrix}</script><script type="math/tex; mode=display">
^{4}v_{4}={^{4}J}(\underline{\theta})\underline{\dot{\theta}}</script><script type="math/tex; mode=display">
\therefore\ ^{4}J(\underline{\theta})=\begin{bmatrix}0&L_{2}S_{3}&0\\0&L_{2}C_{3}+L_{3}&L_{3}\\-L_{1}-L_{2}C_{2}-L_{3}C_{23}&0&0\end{bmatrix}</script><h4 id="Sec-5-1-3-Force-Analysis"><a href="#Sec-5-1-3-Force-Analysis" class="headerlink" title="Sec 5.1.3 Force Analysis"></a>Sec 5.1.3 Force Analysis</h4><script type="math/tex; mode=display">
^{4}F_{4}=\begin{bmatrix}F_{X}\\F_{Y}\\F_{Z}\end{bmatrix}\ ^{4}N_{4}=\begin{bmatrix}0\\0\\0\end{bmatrix}</script><script type="math/tex; mode=display">
^{3}F_{3}={_{4}^{3}R}{^{4}F_{4}}=\begin{bmatrix}F_{X}\\F_{Y}\\F_{Z}\end{bmatrix}</script><script type="math/tex; mode=display">
^{3}N_{3}={_{4}^{3}R}{^{4}N_{4}}+{^{3}P_{4}}\times{^{3}F_{3}}=\begin{bmatrix}L_{3}\\0\\0\end{bmatrix}\times\begin{bmatrix}F_{X}\\F_{Y}\\F_{Z}\end{bmatrix}=\begin{bmatrix}0\\-L_{3}F_{Z}\\L_{3}F_{Y}\end{bmatrix}</script><script type="math/tex; mode=display">
^{2}F_{2}={_{3}^{2}R}{^{3}F_{3}}=\begin{bmatrix}C_{3}&-S_{3}&0\\S_{3}&C_{3}&0\\0&0&1\end{bmatrix}\begin{bmatrix}F_{X}\\F_{Y}\\F_{Z}\end{bmatrix}=\begin{bmatrix}C_{3}F_{X}-S_{3}F_{Y}\\S_{3}F_{X}+C_{3}F_{Y}\\F_{Z}\end{bmatrix}</script><script type="math/tex; mode=display">
^{2}N_{2}={_{3}^{2}R}{^{3}N_{3}}+{^{2}P_{3}}\times{^{2}F_{2}}</script><script type="math/tex; mode=display">
^{2}N_{2}=\begin{bmatrix}C_{3}&-S_{3}&0\\S_{3}&C_{3}&0\\0&0&1\end{bmatrix}\begin{bmatrix}0\\-L_{3}F_{Z}\\L_{3}F_{Y}\end{bmatrix}+\begin{bmatrix}L_{2}\\0\\0\end{bmatrix}\times\begin{bmatrix}C_{3}F_{X}-S_{3}F_{Y}\\S_{3}F_{X}+C_{3}F_{Y}\\F_{Z}\end{bmatrix}</script><script type="math/tex; mode=display">
^{2}N_{2}=\begin{bmatrix}L_{3}S_{3}F_{Z}\\-L_{2}F_{Z}-L_{3}C_{3}F_{Z}\\L_{2}(S_{3}F_{X}+C_{3}F_{Y})+L_{3}F_{Y}\end{bmatrix}</script><script type="math/tex; mode=display">
^{1}F_{1}={_{2}^{1}R}{^{2}F_{2}}=\begin{bmatrix}C_{2}&-S_{2}&0\\0&0&-1\\S_{2}&C_{2}&0\end{bmatrix}\begin{bmatrix}C_{3}F_{X}-S_{3}F_{Y}\\S_{3}F_{X}+C_{3}F_{Y}\\F_{Z}\end{bmatrix}</script><script type="math/tex; mode=display">
^{1}F_{1}=\begin{bmatrix}C_{2}(C_{3}F_{X}-S_{3}F_{Y})-S_{2}(S_{3}F_{X}+C_{3}F_{Y})\\-F_{Z}\\S_{2}(C_{3}F_{X}-S_{3}F_{Y})+C_{2}(S_{3}F_{X}+C_{3}F_{Y})\end{bmatrix}</script><script type="math/tex; mode=display">
^{1}N_{1}={_{2}^{1}R}{^{2}N_{2}}+{^{1}P_{2}}\times{^{1}F_{1}}</script><script type="math/tex; mode=display">
^{1}N_{1}=\begin{bmatrix}C_{2}&-S_{2}&0\\0&0&-1\\S_{2}&C_{2}&0\end{bmatrix}\begin{bmatrix}L_{3}S_{3}F_{Z}\\-L_{2}F_{Z}-L_{3}C_{3}F_{Z}\\L_{2}(S_{3}F_{X}+C_{3}F_{Y})+L_{3}F_{Y}\end{bmatrix}+\begin{bmatrix}L_{1}\\0\\0\end{bmatrix}\times{^{1}F_{1}}</script><script type="math/tex; mode=display">
\begin{align*}
   ^{1}N_{1}&=\begin{bmatrix}C_{2}L_{3}S_{3}F_{Z}+S_{2}L_{2}F_{Z}+S_{2}L_{3}C_{3}F_{Z}\\-L_{2}(S_{3}F_{X}+C_{3}F_{Y})-L_{3}F_{Y}\\L_{3}S_{2}S_{3}F_{Z}-L_{2}C_{2}F_{Z}-L_{3}C_{2}C_{3}F_{Z}\end{bmatrix}\\&+\begin{bmatrix}0\\-L_{1}S_{2}(C_{3}F_{X}-S_{3}F_{Y})-L_{1}C_{2}(S_{3}F_{X}+C_{3}F_{Y})\\-L_{1}F_{Z}\end{bmatrix}
\end{align*}</script><p>Joint torque</p>
<script type="math/tex; mode=display">
\tau_{1}=[-L_{1}-L_{2}C_{2}+L_{3}(S_{2}S_{3}-C_{2}C_{3})]F_{Z}</script><script type="math/tex; mode=display">
\tau_{2}=L_{2}S_{3}F_{X}+(L_{2}C_{3}+L_{3})F_{Y}</script><script type="math/tex; mode=display">
\tau_{3}=L_{3}F_{Y}</script><script type="math/tex; mode=display">
\underline{\tau}={^{4}J^{T}(\underline{\theta})}\begin{bmatrix}F_{X}\\F_{Y}\\F_{Z}\end{bmatrix}</script><p>Which leads to same expression as before for $^{4}J(\underline{\theta})$.</p>
<h3 id="Sec-5-2-Newton-Euler-Formulation"><a href="#Sec-5-2-Newton-Euler-Formulation" class="headerlink" title="Sec 5.2 Newton-Euler Formulation"></a>Sec 5.2 Newton-Euler Formulation</h3><p>The basic Newton Equation of motion is:</p>
<script type="math/tex; mode=display">
F =m\dot{v}_c</script><p>The basic Euler Equation of motion is:</p>
<script type="math/tex; mode=display">
M = I\dot{\omega}_c + \omega_c \times I\omega_c</script><p>The iterative Newton—Euler dynamics algorithm:</p>
<p>Outward iterations: $i:0\rightarrow5$</p>
<script type="math/tex; mode=display">
{^{i+1}\omega}_{i+1}={_i^{i+1}R}\ {^i\omega}_i+\dot{\theta}_{i+1}\ {^{i+1}\hat{Z}}_{i+1}</script><script type="math/tex; mode=display">
{^{i+1}\dot{\omega}}_{i+1}={_i^{i+1}R}\ {^i\dot{\omega}}_i+{_i^{i+1}R}\ {^i\omega}_i\times\dot{\theta}_{i+1}\ {^{i+1}\hat{Z}}_{i+1}+\ddot{\theta}_{i+1}\ {^{i+1}\hat{Z}}_{i+1}</script><script type="math/tex; mode=display">
{^{i+1}\dot{v}}_{i+1}={_i^{i+1}R}({^i\dot{\omega}}_i\times{^iP}_{i+1}+{^i\omega}_i\times({^i\omega}_i\times{^iP}_{i+1})+{^i\dot{v}}_i)</script><script type="math/tex; mode=display">
\begin{aligned}
{^{i+1}\dot{v}}_{C_{i+1}}=&{^{i+1}\dot{\omega}}_{i+1}\times{^{i+1}P}_{C_{i+1}}\\
&+{^{i+1}\omega}_{i+1}\times({^{i+1}\omega}_{i+1}\times{^{i+1}P}_{C_{i+1}})+{^{i+1}\dot{v}}_{i+1}
\end{aligned}</script><script type="math/tex; mode=display">
{^{i+1}F}_{i+1}=m_{i+1}\ {^{i+1}\dot{v}}_{C_{i+1}}</script><script type="math/tex; mode=display">
{^{i+1}N}_{i+1}={^{C_{i+1}}I}_{i+1}\ {^{i+1}\dot{\omega}}_{i+1}+{^{i+1}\omega}_{i+1}\times{^{C_{i+1}}I}_{i+1}\ {^{i+1}\omega}_{i+1}</script><p>Inward iterations: $i:6\rightarrow1$</p>
<script type="math/tex; mode=display">
{^i f}_i={_{i+1}^i R}\ {^{i+1}f}_{i+1}+{^i F}_i</script><script type="math/tex; mode=display">
\begin{aligned}
{^i n}_i=&{^i N}_i+{_{i+1}^i R}\ {^{i+1}n}_{i+1}+{^i P}_{C_i}\times{^i F}_i\\
&+{^i P}_{i+1}\times{_{i+1}^i R}\ {^{i+1}f}_{i+1}
\end{aligned}</script><script type="math/tex; mode=display">
\tau_i={^i n}_i^T\ {^i\hat{Z}}_i</script><h3 id="Sec-5-3-Lagrangian-Formulation"><a href="#Sec-5-3-Lagrangian-Formulation" class="headerlink" title="Sec 5.3 Lagrangian Formulation"></a>Sec 5.3 Lagrangian Formulation</h3><p>We start by developing an expression for the kinetic energy of a manipulator. The kinetic energy of the $i$ -th link, $k_i$, can be expressed as</p>
<script type="math/tex; mode=display">
k_i = \frac{1}{2} m_i {^{i}v_{C_i}}^T {^{i}v_{C_i}} + \frac{1}{2} {^{i}\omega_i}^T {^{C_i}I_i} {^{i}\omega_i}</script><p>The $v_{c_i}$ and $^i\omega_i$ in the above equation are functions of $\Theta$ and $\dot{\Theta}$, so we see that the kinetic energy of a manipulator can be described by a scalar formula as a function of joint position and velocity, $k(\Theta, \dot{\Theta})$. In fact, the kinetic energy of a manipulator is given by</p>
<script type="math/tex; mode=display">
k(\Theta, \dot{\Theta}) = \frac{1}{2}\dot{\Theta}^T M(\Theta)\dot{\Theta}</script><p>The potential energy of the $i$-th link, $u_i$, can be expressed as</p>
<script type="math/tex; mode=display">
u_i = -m_i \, {}^0\boldsymbol{g}^T \, {}^0\boldsymbol{P}_{C_i} + u_{ref_i}</script><p>where $^0\boldsymbol{g}$ is the 3 × 1 gravity vector, $^0\boldsymbol{P}_{C_i}$ is the vector locating the center of mass of the $i$-th link, and $u_{ref_i}$ is a constant chosen so that the minimum value of $u_i$ is zero.</p>
<p>The Lagrangian dynamic formulation provides a means of deriving the equations of motion from a scalar function called the <strong>Lagrangian</strong>, which is defined as the difference between the kinetic and potential energy of a mechanical system. In our notation, the Lagrangian of a manipulator is  </p>
<script type="math/tex; mode=display">
\mathcal{L}(\Theta, \dot{\Theta}) = k(\Theta, \dot{\Theta}) - u(\Theta).</script><p>The equations of motion for the manipulator are then given by  </p>
<script type="math/tex; mode=display">
\frac{d}{dt} \frac{\partial \mathcal{L}}{\partial \dot{\Theta}} - \frac{\partial \mathcal{L}}{\partial \Theta} = \tau</script><p>where $\tau$ is the $n \times 1$ vector of actuator torques. In the case of a manipulator, this equation becomes  </p>
<script type="math/tex; mode=display">
\frac{d}{dt} \frac{\partial k}{\partial \dot{\Theta}} - \frac{\partial k}{\partial \Theta} + \frac{\partial u}{\partial \Theta} = \tau</script><p>where the arguments of $k(\cdot)$ and $u(\cdot)$ have been dropped for brevity.</p>
<h3 id="Sec-5-4-Examples"><a href="#Sec-5-4-Examples" class="headerlink" title="Sec 5.4 Examples"></a>Sec 5.4 Examples</h3><h2 id="Chap-6-Trajectory-Generation"><a href="#Chap-6-Trajectory-Generation" class="headerlink" title="Chap 6. Trajectory Generation"></a>Chap 6. Trajectory Generation</h2>
<div class="article-footer fs14"></div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">回顾上一篇</div><a href="/notes/index.html">Forehead</a></div><div class="item" id="next"><div class="note">接下来阅读</div><a href="/notes/autocontrol.html">ME Control(EN)</a></div></section></div>




<footer class="page-footer footnote"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs15">博客</span><a href="/">近期</a><a href="/categories/">分类</a><a href="/tags">标签</a><a href="/archives">归档</a></div><div class="sitemap-group"><span class="fs15">项目</span><a href="/wiki/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">学习笔记</a></div><div class="sitemap-group"><span class="fs15">更多</span><a target="_blank" rel="noopener" href="https://github.com/">GitHub</a></div></div><div class="text"><center>
<span>
© 2024
<a style="font-weight: bold;  auto;" target="_blank" rel="noopener" href="https://github.com/Maxwell0339">Maxwell</a>
使用 <a style="font-weight: bold;  auto;" target="_blank" rel="noopener" href="https://github.com/FelicxFoster/hexo-theme-stellar">Stellar</a>
创建
</span>
<br>
<!--不蒜子计数器-->
<script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!--添加一个访问量-->
<span>总访问 <span id="busuanzi_value_site_pv" style="font-weight: bold;"></span> 次 | 本页访问 <span id="busuanzi_value_page_pv" style="font-weight: bold;"></span> 次</span>
</br>
<span id="runtime_span"></span>

<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var runtime_span = document.getElementById('runtime_span');

    function show_runtime() {
      // 调用定时器
      setTimeout(show_runtime, 1000);

      var seconds = 1000;
      var minutes = seconds * 60;
      var hours = minutes * 60;
      var days = hours * 24;
      var years = days * 365;

      var today = new Date();
      var todayYear = today.getFullYear();
      var todayMonth = today.getMonth();
      var todayDate = today.getDate();
      var todayHour = today.getHours();
      var todayMinute = today.getMinutes();
      var todaySecond = today.getSeconds();

      var t1 = Date.UTC(2025, 2, 23, 0, 0, 0); // UTC时间，月份从0开始
      var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
      var diff = t2 - t1;

      var diffYears = Math.floor(diff / years);
      var diffDays = Math.floor((diff / days) - diffYears * 365);
      var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
      var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
      var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);

      // 更新显示时间的span元素内容
      runtime_span.innerHTML = "🦉营业：" + diffYears + " 年 " + diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒🦉";
    }

    show_runtime(); // 初次调用函数以启动定时器
  });
</script>
</center>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">本文目录</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Chap1-Spatial-Descriptions-and-Transformations"><span class="toc-text">Chap1. Spatial Descriptions and Transformations</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-1-1-Descriptions-Positions-Orientations-and-Frames"><span class="toc-text">Sec 1.1 Descriptions: Positions, Orientations and Frames</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-1-2-Mappings"><span class="toc-text">Sec 1.2 Mappings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-1-3-Operators"><span class="toc-text">Sec 1.3 Operators</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-1-4-Transformation-Arithmetic"><span class="toc-text">Sec 1.4 Transformation Arithmetic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-1-5-More-on-Representation-of-Orientation"><span class="toc-text">Sec 1.5 More on Representation of Orientation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chap-2-Manipulator-Kinematics"><span class="toc-text">Chap 2. Manipulator Kinematics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-2-1-Link-Description"><span class="toc-text">Sec 2.1 Link Description</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-2-2-Manipulator-Kinematics"><span class="toc-text">Sec 2.2 Manipulator Kinematics</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-2-2-1-Convention-for-Affixing-Frames-to-Links"><span class="toc-text">Sec 2.2.1 Convention for Affixing Frames to Links</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-2-2-2-Manipulator-Kinematics"><span class="toc-text">Sec 2.2.2 Manipulator Kinematics</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chap-3-Inverse-Manipulator-Kinematics"><span class="toc-text">Chap 3. Inverse Manipulator Kinematics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-3-1-Solvability-Algebraic-Solution-and-Geometric-Solution"><span class="toc-text">Sec 3.1: Solvability, Algebraic Solution and Geometric Solution</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-3-1-1-Solvability"><span class="toc-text">Sec 3.1.1 Solvability</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-1-Existence-of-solutions"><span class="toc-text">3.1.1.1 Existence of solutions</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-2-Multiple-solutions"><span class="toc-text">3.1.1.2 Multiple solutions</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-3-Method-of-solution"><span class="toc-text">3.1.1.3 Method of solution</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-3-1-2-Algebraic-solution"><span class="toc-text">Sec 3.1.2 Algebraic solution</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-3-1-3-Geometric-solution"><span class="toc-text">Sec 3.1.3 Geometric solution</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-3-2-Pieper%E2%80%99s-Solution-When-Three-Axes-Intersect"><span class="toc-text">Sec 3.2 Pieper’s Solution When Three Axes Intersect</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chap-4-Velocities-and-Static-Forces"><span class="toc-text">Chap 4. Velocities and Static Forces</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-4-1-Velocity-of-rigid-body-and-velocity-propagation-from-link-to"><span class="toc-text">Sec 4.1 Velocity of rigid body and velocity propagation from link to</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-4-1-1-Differentiation-of-position-vectors"><span class="toc-text">Sec 4.1.1 Differentiation of position vectors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-4-1-2-Angular-velocity-vector"><span class="toc-text">Sec 4.1.2 Angular velocity vector</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-4-1-3-Linear-velocity"><span class="toc-text">Sec 4.1.3 Linear velocity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-4-1-4-Rotational-velocity"><span class="toc-text">Sec 4.1.4 Rotational velocity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-4-1-5-Simultaneous-linear-and-rotational-velocity"><span class="toc-text">Sec 4.1.5 Simultaneous linear and rotational velocity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-4-1-6-Velocity-propagation-from-link-to-link"><span class="toc-text">Sec 4.1.6 Velocity propagation from link to link</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-4-2-Jacobians-and-static-forces-in-manipulators"><span class="toc-text">Sec 4.2 Jacobians and static forces in manipulators</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-4-2-1-Jacobian"><span class="toc-text">Sec 4.2.1 Jacobian</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-4-2-2-Static-forces-in-manipulators"><span class="toc-text">Sec 4.2.2 Static forces in manipulators</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chap-5-Dynamics-of-Manipulators"><span class="toc-text">Chap 5. Dynamics of Manipulators</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-5-1-Jacobian"><span class="toc-text">Sec 5.1 Jacobian</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-5-1-1-Forward-Kinematics"><span class="toc-text">Sec 5.1.1 Forward Kinematics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-5-1-2-Velocity-Analysis"><span class="toc-text">Sec 5.1.2 Velocity Analysis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sec-5-1-3-Force-Analysis"><span class="toc-text">Sec 5.1.3 Force Analysis</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-5-2-Newton-Euler-Formulation"><span class="toc-text">Sec 5.2 Newton-Euler Formulation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-5-3-Lagrangian-Formulation"><span class="toc-text">Sec 5.3 Lagrangian Formulation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sec-5-4-Examples"><span class="toc-text">Sec 5.4 Examples</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chap-6-Trajectory-Generation"><span class="toc-text">Chap 6. Trajectory Generation</span></a></li></ol></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>回到顶部</span></a></div></widget>
</div></aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `刚刚`,
      min: `分钟前`,
      hour: `小时前`,
      day: `天前`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js`,
    marked: `https://cdn.jsdelivr.net/npm/marked@13.0.1/lib/marked.umd.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>


<!-- required -->
<script src="/js/main.js?v=1.29.1" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    applyThemeToGiscus(theme)
  }

  const applyThemeToGiscus = (theme) => {
    theme = theme === 'auto' ? 'preferred_color_scheme' : theme

    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)

    const messages = {
      light: `切换到浅色模式`,
      dark: `切换到深色模式`,
      auto: `切换到跟随系统配色`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    }
  })()
</script>


<!-- optional -->



<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css`,
    js: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    processEscapes: true
  }
});
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});
MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for(i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
